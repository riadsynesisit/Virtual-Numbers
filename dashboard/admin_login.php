<?php$getID  =   $_GET[id];   require "./includes/DRY_setup.inc.php";function get_page_content(){		//check if the user is an admin, otherwise redirect to index page	//if($_SESSION['admin_flag']==1){	if($_SERVER['HTTP_REFERER'] !="" && (strpos($_SERVER['HTTP_REFERER'],"system.hawkingsoftware.ae")!=FALSE || strpos($_SERVER['HTTP_REFERER'],"dev.stickynumber.com")!=FALSE || strpos($_SERVER['HTTP_REFERER'],"localhost")!=FALSE)){				$id=$_REQUEST['id'];				show_index_page($id);					}else{		not_admin_user();	}	}function show_index_page($id){    $this_user  =   new User();    $row        =   $this_user->getUserInfoById($id);    if($row['status']   ==  'Active')    {        $this_access    =   new Access();        //Setup sesssion for this user        $_SESSION['user_logins_id'] =   $row['id'];        $_SESSION['user_name']      =   $row['name'];        $_SESSION['user_login']     =   $row['email'];        $_SESSION['is_authenticated']   = true;        if(isset($_SERVER["HTTP_HOST"]) && $_SERVER["HTTP_HOST"]=="member.stickynumber.com" && $row['admin_flag']==1){        	$_SESSION['admin_flag'] = 0; //Prevent the admin login on member.stickynumber.com - basicsupport can't access        }else{        	$_SESSION['admin_flag']     =   $row['admin_flag'];        }        // update access logs        $this_access->updateAccessLogs('Logged In');                header("Location: index.php?id=$id");    }else{        //Account Suspended        $this_page->content_area = "<h3>Account Suspended/Terminated Contact support@stickynumber.com<h3>\n";        show_login_page($this_page);    }}function show_login_page($this_page){		build_form_page($this_page);	common_header($this_page, "Login Page - Login Required");	}function build_form_page($this_page){		// first, show existing messages in the system, in order of valid date, creation date and severity	$msg = new SystemMessages();	$current_message_list = $msg->get_current_issues();	$this_page->variable_stack['current_message_list'] = $current_message_list;#	@this_page.content_area += @this_page.render_html('pages/system_notices_summary_current.inc.rhtml')	$this_page->content_area .= getLoginPage($this_page);	}show_index_page($_REQUEST['id']);require("includes/DRY_authentication.inc.php");?>